<<<<<<< HEAD
- const { repo, repo_id, category_id, theme:themes, option } = theme.giscus
- const giscusUrl = theme.asset.giscus || 'https://giscus.app/client.js'
- const giscusOriginUrl = new URL(giscusUrl).origin

script.
  function getGiscusTheme (theme) {
    return theme === 'dark' ? '!{themes.dark}' : '!{themes.light}'
  }

  function loadGiscus () {
    const config = Object.assign({
      src: '!{giscusUrl}',
=======
- const { repo, repo_id, category_id, option } = theme.giscus
- const themes = theme.giscus.theme
script.
  function loadGiscus () {
    let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? '!{themes.dark}' : '!{themes.light}'

    const config = Object.assign({
      src: 'https://giscus.app/client.js',
>>>>>>> e5e3a0e (my blog first commit)
      'data-repo': '!{repo}',
      'data-repo-id': '!{repo_id}',
      'data-category-id': '!{category_id}',
      'data-mapping': 'pathname',
<<<<<<< HEAD
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
=======
      'data-theme': nowTheme,
>>>>>>> e5e3a0e (my blog first commit)
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },!{JSON.stringify(option)})

    let ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
  }

<<<<<<< HEAD
  function changeGiscusTheme (theme) {
    function sendMessage(message) {
      const iframe = document.querySelector('iframe.giscus-frame')
      if (!iframe) return
      iframe.contentWindow.postMessage({ giscus: message }, '!{giscusOriginUrl}')
=======
  function changeGiscusTheme () {
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? '!{themes.dark}' : '!{themes.light}'

    function sendMessage(message) {
      const iframe = document.querySelector('iframe.giscus-frame');
      if (!iframe) return;
      iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
>>>>>>> e5e3a0e (my blog first commit)
    }

    sendMessage({
      setConfig: {
<<<<<<< HEAD
        theme: getGiscusTheme(theme)
=======
        theme: theme
>>>>>>> e5e3a0e (my blog first commit)
      }
    });
  }

<<<<<<< HEAD
  btf.addModeChange('giscus', changeGiscusTheme)

=======
>>>>>>> e5e3a0e (my blog first commit)
  if ('!{theme.comments.use[0]}' === 'Giscus' || !!{theme.comments.lazyload}) {
    if (!{theme.comments.lazyload}) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    function loadOtherComment () {
      loadGiscus()
    }
  }
